<!DOCTYPE html>
<html lang="en-Us">
    <head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Kernel Exploitation Part One &middot; Slices of a hacker&#39;s mind</title>

		
  		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/fonts">
		
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

		
		<link href="" rel="alternate" type="application/rss+xml" title="Slices of a hacker&#39;s mind" />
	</head>

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="/">
					<h2 class="nav-title">Slices of a hacker&#39;s mind</h2>
				</a>
				<ul>
    <li><a href="/contact">About</a></li>
    <li><a href="/flash">Flash Posts</a></li>
    <li><a href="/post">Posts</a></li>
    <li><a href="/search">Search</a></li>
    <li><a href="/privacy">Privacy</a></li>
</ul>

			</div>
		</nav>

        

<main>
	<div class="post">
		<div class="post-info">
    <span>Written by</span>
        akendo
        <span>on&nbsp;</span><time datetime="2021-02-01 12:59:28 &#43;0100 CET">February 1, 2021</time>
        <br>
        <span>3 minutes reading </span>
         <span> posted in 
    
        <a href="https://blog.akendo.eu/categories/security/">Security</a>
	
    
	
    </span>
    <span>
    <br>
    
 
  with tags:
   <a href="https://blog.akendo.eu/tags/kernel/">kernel</a> <a href="https://blog.akendo.eu/tags/100daystooffload/">100daystooffload</a></ul>



</div>

		<h1 class="post-title">Kernel Exploitation Part One</h1>
<div class="post-line"></div>

		

		<p>This post reflects my notes and additional thoughts about the first lecture about kernel exploitation of pwn.college[0]. Until a moment ago, I wanted to publish the notations altogether. However, this post contained already more information than I want to do in a day. Because I’m working on this post for three days now, I&rsquo;ve decided to split it.</p>
<style>
.video-container {
    overflow: hidden;
    position: relative;
    width:100%;
}

.video-container::after {
    padding-top: 56.25%;
    display: block;
    content: '';
}

.video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

</style>
<div class="video-container">
  <iframe src="https://www.youtube.com/embed/j0I2AakUAxk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<p>We’re going to define what a kernel is. To make it dead simple: a kernel is a piece of software that governs hardware. You can compare it to a government. Working with the kernel means moving into a different layer of abstraction.</p>
<p><img src="/pictures/Kernel-Introduction.jpg" alt=""></p>
<p>Here I like to add a thought about this metaphor. It is useful but does not include voting. In this metaphor, you would be the voters and your vote for an operating system. However, often, once a OS was installed, it’s going to resist change.</p>
<h2 id="what-are-external-resources">What are external resources</h2>
<p><img src="/pictures/Kernel-Introduction2.jpg" alt=""></p>
<p>I was wondering why he shows these assembler commands here. I guess that these instructions are widely used and should be understood therefore early. The hlt operation halts computation and should be only executed by the kernel.</p>
<p>The idea at its core is that only operation that relates to the hardware should here. Another sample is the <code>in</code> and <code>out</code> instruction that should get data from input or output. When we have LEDs, we want to address this often will be executed by such instruction. I mainly, however, had an embedded system without any form of a kernel.</p>
<p><code>cr3</code> is a control register[1] that is responsible for the page table. The word control implies here not only storing data but change the behavior of the CPU. It means that it helps to lookup memory addresses from virtual memory. We might be able to tinker with the memory layout when access is unrestricted here. Hence all of these instructions require higher privileges. Learning about these five keywords gave me the idea to test this instruction with a simple program. Something that I might do later.</p>
<p>The <code>MSR_LSTAR</code> is another register and It is responsible for syscalls, if I get this correctly.</p>
<p>Some comment to the word dichotomy, I knew it before, but it requires a bit of clarification. The words have a bit of a different meaning, depending on the language and context. In this specific case, the lecturer relates to a structure that opposes each other without a logical intersection. Program languages also have a dichotomy. C++ is an example in which the memory model consists of Stack and Heap. There is also the dichotomy fallacy and so on.</p>
<p>About 5:20, he asks: How do the kernel and CPU know who is allowed to execute a privileged instruction. My answer is that each process will have a mark or id that represents its access level. The CPU only executes a given instruction with kernel privileges when the access level is correct. For Linux this should be the id zero, I guess. But let’s see.</p>
<p>His answer overlaps quite well with mine.</p>
<p>so far,<br>
akendo</p>
<p>[0] <a href="https://pwn.college/modules/kernel">https://pwn.college/modules/kernel</a> <br>
[1] <a href="https://en.wikipedia.org/wiki/Control_register#CR3">https://en.wikipedia.org/wiki/Control_register#CR3</a></p>


		
	</div>

	<div class="pagination">
		<a href="/flash/30.01.2021-linkdrop/" class="left arrow">&#8592;</a>
		<a href="/post/2021-02-02-kernel-exploitation-part-two/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>

</main>



        		<footer>
			
			<span>
			&copy; <time datetime="2023-05-02 07:01:30.198154881 &#43;0200 CEST m=&#43;0.158039431">2023</time> . Made with <a href='https://gohugo.io'>Hugo</a> using the <a href='https://github.com/EmielH/tale-hugo/'>Tale</a> theme.
			</span>
		</footer>

    </body>
</html>
